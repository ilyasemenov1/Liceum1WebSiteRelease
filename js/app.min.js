(()=>{"use strict";class e{constructor(e){this.element=e,this.isAdd=!0}event(){void 0!==this.element.dataset.popupRight?new t(this.element).popupRight():void 0!==this.element.dataset.popup&&new t(this.element).popupClassic()}removePopup(){let e=document.querySelectorAll(".button-popup");this.isAdd=!1,e.forEach((e=>{e.classList.add("remove"),setTimeout((()=>{e.remove()}),100)})),setTimeout((()=>{this.isAdd=!0}),200)}}class t{constructor(e){this.element=e,this.rect=e.getBoundingClientRect(),this.popup=document.createElement("div"),this.popup.className="button-popup",document.body.append(this.popup),this.elementMargin=7}popupClassic(){this.popup.innerHTML=`<span>${this.element.dataset.popup}</span>`;let e=this.rect.left+this.element.clientWidth/2-this.popup.clientWidth/2,t=this.rect.top+this.rect.height+this.elementMargin;this.popup.style=`left: ${e}px; top: ${t}px`,window.addEventListener("scroll",(()=>{setTimeout((()=>{let s=this.element.offsetTop;t=s+this.rect.height+7,this.popup.style=`left: ${e}px; top: ${t}px`}),100)}))}popupRight(){this.popup.innerHTML=`<span>${this.element.dataset.popupRight}</span>`,this.popup.classList.add("right");let e=this.rect.left+this.element.clientWidth+10,t=this.rect.top+this.element.clientHeight/2-this.popup.clientHeight/2;this.popup.style=`left: ${e}px; top: ${t}px`}}class s{constructor(){this.header=document.querySelector(".header"),this.burgerMenuE=new i,this.burgerMenu=document.querySelector(".burger-menu"),this.topButton=document.querySelector(".scroll-top"),this.delta=500,this.lastKeypressTime=0}headerScrollEvent(){window.addEventListener("scroll",(()=>{this.scroll()})),window.addEventListener("load",(()=>{this.scroll()})),this.topButton.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})})),window.addEventListener("keydown",(e=>{this.doubleArrowKeypress(e)}))}doubleArrowKeypress(e){switch(e.key){case"ArrowUp":this.doubleKeyEvent((function(){window.scrollTo({top:0,behavior:"smooth"})}));break;case"ArrowDown":this.doubleKeyEvent((function(){window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}))}}doubleKeyEvent(e){let t=new Date;t-this.lastKeypressTime<=this.delta&&(e(),t=0),this.lastKeypressTime=t}scroll(){window.pageYOffset>35?(this.burgerMenuE.calcBurgerMenuPosition(70),this._constractHeader(),this.burgerMenu.classList.add("scrolled"),this.topButton.classList.remove("removed")):(this.burgerMenuE.calcBurgerMenuPosition(115),this.header.classList.remove("scrolled"),this.burgerMenu.classList.remove("scrolled"),this.topButton.classList.add("removed"))}_constractHeader(){this.header.classList.add("scrolled")}_removeScrollHeader(){this.header.classList.remove("scrolled")}}class i{constructor(){this.burgerMenuCont=document.querySelector(".menu-conteiner"),this.pageHeader=document.querySelector(".header"),this.pageFixedButtons=document.querySelectorAll(".scroll-top, .visually-impaired-version")}calcBurgerMenuPosition(e){let t=this.pageHeader.clientHeight;isNaN(e)||(t=e),this.burgerMenuCont.style=`transform: translateY(${t}px); height: calc(100vh - ${t}px)`}openBurgerMenu(){this.burgerMenuCont.classList.remove("disactive"),setTimeout((()=>{this.burgerMenuCont.classList.add("active"),document.body.style="overflow:hidden;"}),10),this.pageFixedButtons.forEach((e=>{e.classList.add("removed")}))}closeBurgerMenu(){this.burgerMenuCont.classList.remove("active"),this.burgerMenuCont.classList.add("remove"),setTimeout((()=>{this.burgerMenuCont.classList.add("disactive"),this.burgerMenuCont.classList.remove("remove"),document.body.style="",this.pageFixedButtons.forEach((e=>{e.classList.remove("removed"),(new s).scroll()}))}),200)}}!function(e){let t=new Image;t.onload=t.onerror=()=>{t.height,document.documentElement.classList.add("webp")},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}();let o=new s,r=new class{constructor(){this.buttons=document.querySelectorAll("button"),this.nav=document.querySelector(".header-content_main-menu"),this.searchCont=document.querySelector(".header-search"),this.searchButton=document.querySelector(".search"),this.searchInput=document.querySelector(".search-block_input"),this.searchBlockAria=document.querySelector(".search-block-aria"),this.isAddPopup=!0,this.isCloseSearch=!0,this.delay=0,this.burgerMenuE=new i}buttonsHoverEvent(){this.buttons.forEach((e=>{e.addEventListener("mouseover",(()=>{this._addPopup(e,!1)})),e.addEventListener("focus",(()=>{this._addPopup(e,!0)})),e.addEventListener("mouseleave",(()=>{this._removePopup(e)})),e.addEventListener("blur",(()=>{this._removePopup(e)}))}))}_addPopup(t,s,i=0){this.isAddPopup&&(s?new e(t).event():this.delay=setTimeout((()=>{new e(t).event()}),i),this.isAddPopup=!1)}_removePopup(t){clearTimeout(this.delay),new e(t).removePopup(),this.isAddPopup=!0}menuEvent(){let e=document.querySelector(".burger");document.querySelector(".menu-conteiner_dark").addEventListener("click",(()=>{this.burgerMenuE.closeBurgerMenu(),e.classList.remove("active")})),e.addEventListener("click",(()=>{e.classList.contains("active")?this.burgerMenuE.closeBurgerMenu():this.burgerMenuE.openBurgerMenu(),e.classList.toggle("active")}))}searchEvent(){this.searchButton.addEventListener("click",(()=>{this.searchButton.classList.contains("search-active")||this.openSearch()})),window.addEventListener("keydown",(e=>{111==e.keyCode&&(this.openSearch(),setTimeout((()=>{this.searchInput.focus()}),300))})),window.addEventListener("load",(()=>{this.burgerMenuE.calcBurgerMenuPosition()})),this.searchBlockAria.addEventListener("click",(()=>{this.closeSearch()}));let e=document.querySelector(".search-block");this.searchInput.addEventListener("focus",(()=>{e.classList.add("active")})),this.searchInput.addEventListener("blur",(()=>{e.classList.remove("active")}))}openSearch(){this.nav.classList.add("remove"),this.searchButton.blur(),setTimeout((()=>{this.searchButton.classList.add("search-active"),this.nav.classList.remove("remove"),this.nav.classList.add("disactive"),this.searchCont.classList.remove("disactive"),this.searchCont.classList.add("active"),this.searchInput.focus(),this.searchButton.dataset.popup="Поиск",this.searchBlockAria.classList.remove("disactive")}),200)}closeSearch(){this.searchCont.classList.add("remove"),this.searchButton.blur(),setTimeout((()=>{this.searchButton.classList.remove("search-active"),this.searchCont.classList.remove("remove"),this.searchCont.classList.add("disactive"),this.nav.classList.remove("disactive"),this.nav.classList.add("active"),this.searchButton.dataset.popup="Открыть поиск",this.searchBlockAria.classList.add("disactive")}),200)}};r.buttonsHoverEvent(),r.menuEvent(),r.searchEvent(),o.headerScrollEvent()})();